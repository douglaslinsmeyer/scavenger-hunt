# Production-specific patches for NGINX Fabric Gateway
---
# Update HTTPRoutes with production hostnames
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: backend-api-route
spec:
  hostnames:
  - scavenger-hunt.linsmeyer.com
  - api.scavenger-hunt.linsmeyer.com
---
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: admin-dashboard-route
spec:
  hostnames:
  - scavenger-hunt.linsmeyer.com
  - admin.scavenger-hunt.linsmeyer.com
---
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: player-app-route
spec:
  hostnames:
  - scavenger-hunt.linsmeyer.com
  - play.scavenger-hunt.linsmeyer.com
---
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: https-redirect
spec:
  hostnames:
  - scavenger-hunt.linsmeyer.com
  - "*.scavenger-hunt.linsmeyer.com"
---
# Stricter rate limits for production
apiVersion: gateway.nginx.org/v1alpha1
kind: ClientSettingsPolicy
metadata:
  name: api-ratelimit-policy
spec:
  rateLimit:
    requests: 60  # Reduced from 100 for production
    burst: 10     # Reduced from 20
---
# Production observability settings
apiVersion: gateway.nginx.org/v1alpha1
kind: ObservabilityPolicy
metadata:
  name: tracing-policy
spec:
  tracing:
    otel:
      samplingRate: 0.05  # 5% sampling in production (reduced from 10%)
