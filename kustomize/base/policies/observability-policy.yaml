# Observability Policies for NGINX Gateway Fabric
# Currently only tracing is supported in v1alpha2
---
# Tracing Policy for Backend API
apiVersion: gateway.nginx.org/v1alpha2
kind: ObservabilityPolicy
metadata:
  name: backend-tracing-policy
spec:
  targetRefs:
  - group: gateway.networking.k8s.io
    kind: HTTPRoute
    name: backend-api-route
  tracing:
    strategy: ratio
    ratio: 10  # Sample 10% of requests
    context: propagate
---
# Tracing Policy for Admin Dashboard
apiVersion: gateway.nginx.org/v1alpha2
kind: ObservabilityPolicy
metadata:
  name: admin-tracing-policy
spec:
  targetRefs:
  - group: gateway.networking.k8s.io
    kind: HTTPRoute
    name: admin-dashboard-route
  tracing:
    strategy: ratio
    ratio: 10
    context: propagate
---
# Tracing Policy for Player App
apiVersion: gateway.nginx.org/v1alpha2
kind: ObservabilityPolicy
metadata:
  name: player-tracing-policy
spec:
  targetRefs:
  - group: gateway.networking.k8s.io
    kind: HTTPRoute
    name: player-app-route
  tracing:
    strategy: ratio
    ratio: 10
    context: propagate